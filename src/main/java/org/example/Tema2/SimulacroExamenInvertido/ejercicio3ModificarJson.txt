SIMULACRO DE EXAMEN INVERTIDO – ACCESO A DATOS

3. Ejercicio de Manipulación JSON: Gestión de Biblioteca

Se dispone del siguiente contenido inicial en el fichero biblioteca.json:

{
  "biblioteca": [
    {
      "categoria": "Ficción",
      "libros": [
        {
          "id": 1,
          "titulo": "El Quijote",
          "autor": "Miguel de Cervantes",
          "editorial": "Francisco de Robles",
          "anio": 1605,
          "precio": {
            "valor": 20.5,
            "moneda": "EUR"
          },
          "disponibilidad": "Disponible"
        },
        {
          "id": 2,
          "titulo": "Cien Años de Soledad",
          "autor": "Gabriel García Márquez",
          "editorial": "Harper & Row",
          "anio": 1967,
          "precio": {
            "valor": 25.0,
            "moneda": "USD"
          },
          "disponibilidad": "Prestado"
        }
      ]
    },
    {
      "categoria": "No Ficción",
      "libros": [
        {
          "id": 3,
          "titulo": "Sapiens: De animales a dioses",
          "autor": "Yuval Noah Harari",
          "editorial": "Harper",
          "anio": 2011,
          "precio": {
            "valor": 30.0,
            "moneda": "USD"
          },
          "disponibilidad": "Disponible"
        },
        {
          "id": 4,
          "titulo": "Educated",
          "autor": "Tara Westover",
          "editorial": "Random House",
          "anio": 2018,
          "precio": {
            "valor": 22.5,
            "moneda": "USD"
          },
          "disponibilidad": "Disponible"
        }
      ]
    },
    {
      "categoria": "Ciencia Ficción",
      "libros": [
        {
          "id": 5,
          "titulo": "Dune",
          "autor": "Frank Herbert",
          "editorial": "Ace Books",
          "anio": 1965,
          "precio": {
            "valor": 19.99,
            "moneda": "USD"
          },
          "disponibilidad": "Prestado"
        }
      ]
    }
  ]
}

Escribe una clase Java ModificarJsonBiblioteca.java que, utilizando la librería Gson o Jackson:

1. Lectura del JSON
   - Lee el fichero biblioteca.json
   - Parsea el contenido a objetos Java

2. Modificación de datos existentes:
   - Localiza el libro con id=2 ("Cien Años de Soledad")
   - Cambia su disponibilidad de "Prestado" a "Disponible"
   - Actualiza su precio a 28.0

3. Adición de nuevo libro:
   - Crea un nuevo libro en la categoría "Ficción"
   - Con id = 6
   - titulo = "1984"
   - autor = "George Orwell"
   - editorial = "Secker & Warburg"
   - anio = 1949
   - precio: valor = 18.5, moneda = "EUR"
   - disponibilidad = "Disponible"

4. Eliminación de libro:
   - Elimina completamente el libro con id=5 ("Dune")
   - Si la categoría queda sin libros, eliminar también la categoría

5. Guardado del documento modificado:
   - Guarda el JSON resultante en biblioteca_final.json
   - Asegura que tenga formato legible (pretty print)
   - Muestra el JSON resultante por consola con formato

6. Manejo de excepciones:
   - Captura JsonParseException para errores de parsing JSON
   - Captura IOException para errores de entrada/salida
   - Captura NullPointerException para datos no encontrados

DEPENDENCIAS MAVEN NECESARIAS:

Para Gson:
<dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>2.10.1</version>
</dependency>

Para Jackson:
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.15.2</version>
</dependency>
